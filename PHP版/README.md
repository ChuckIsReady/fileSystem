需求分析
--------

1.  数据字典（包括数据项、数据结构、数据流）

数据项、数据结构见4.1.系统关系模型4.2.系统数据库表结构

1.  数据流图

图 主要操作数据流图

概念结构设计
------------

图 E-R图

1.  逻辑结构设计

    1.  **系统关系模型**

        1.  用户表（*用户名*，密码，拥有文件数量，拥有文件夹数量，最大创建数量）

        2.  文件细节表（*文件ID*，文件名，文件所有者，文件类型，创建时间，是否加锁）

        3.  文件夹关系表（*文件ID*，子文件及文件夹ID队列，父文件夹ID）

        4.  文件内容表（*文件ID*，文件内容）

    2.  **系统数据库表结构**

数据库表索引

| 表名                | 中文名       |
|---------------------|--------------|
| User                | 用户表       |
| File_Detail         | 文件细节表   |
| Folder_Relationship | 文件夹关系表 |
| File_Inner          | 文件内容表   |

用户表(User)

| 字段名     | 字段类型 | 长度 | 主/外键 | 字段值约束 | 对应中文名   |
|------------|----------|------|---------|------------|--------------|
| name       | char     | 10   | P       | Not null   | 用户名       |
| passWord   | char     | 15   |         |            | 密码         |
| fileNum    | int      | 4    |         |            | 文件数量     |
| folderNum  | int      | 4    |         |            | 文件夹数量   |
| storageMAX | int      | 4    |         |            | 存储数量上限 |

文件细节表(File_Detail)

| 字段名         | 字段类型 | 长度 | 主/外键 | 字段值约束 | 对应中文名 |
|----------------|----------|------|---------|------------|------------|
| fileID         | int      | 5    | P       | Not null   | *文件ID*   |
| fileName       | char     | 15   |         |            | 文件名     |
| fileOwner      | char     | 10   |         |            | 文件所有者 |
| fileType       | tinyint  | 4    |         |            | 文件类型   |
| fileCreateTime | char     | 25   |         |            | 创建时间   |
| isLocked       | tinyint  | 1    |         |            | 是否加锁   |

文件夹关系表(Folder_Relationship)

| 字段名            | 字段类型 | 长度 | 主/外键 | 字段值约束 | 对应中文名           |
|-------------------|----------|------|---------|------------|----------------------|
| fileID            | int      | 5    | P       | Not null   | *文件ID*             |
| childrenFileIDArr | varchar  | 200  |         |            | 子文件及文件夹ID队列 |
| parentFolderID    | int      | 5    |         |            | 父文件夹ID           |

文件内容表(File_Inner)

| 字段名    | 字段类型 | 长度 | 主/外键 | 字段值约束 | 对应中文名 |
|-----------|----------|------|---------|------------|------------|
| fileID    | int      | 5    | P       | Not null   | *文件ID*   |
| fileInner | varchar  | 1024 |         |            | 文件内容   |

1.  **系统功能模块图和模块功能描述（模块IPO图）；**

图 系统功能模块图

1.  **安全性（用户类别和权限）和完整性（主、外码和用户自定义的完整性约束）设计；**

**安全性：**

图 数据库操作流程图

>   **操作规则：**

-   除管理员外，只能在自己拥有的目录中进行删除和新建文件夹，只能删除自己的文件和文件夹

-   文件默认是不锁定状态（欢迎文件默认锁定），所有人可读可写，文件夹默认不锁定，所有人可读，当加锁后，除了管理员，**其他人对加锁文件夹不能访问，加锁文件不能保存**，如果需要保护文件，可将文件放入文件夹加锁

**完整性：**

见4.1,4.2详细约束。

1.  **程序清单**

**/…**

**/css**

Style.css 界面样式管理文件

**/js**

Js.js 核心操作文件，数据结构的建立，数据操作等大部分功能在这里实现

**/i**

favicon.ico 网页的标签栏图标

login.png

login_w.png 登录界面和管理界面的LOGO

**/lib**

…(文件依赖，主要是AmazeUI的框架还有JQ文件)

Index.html 登录界面，从这里进入

FileSystem.html 文件系统界面

Server.php PHP接受AJAX请求页面，根据请求调用程序

Function.php PHP程序代码

File.sql MYSQL备份文件，用于建立数据库

系统测试方案和测试报告
----------------------

1.  初始界面

![](media/9eaea27421c2950d0ed4f5a47d699d03.png)

图7 初始界面

1.  注册

![](media/4db9b65323d267d54ef131d6eacd00fa.png)

图8 注册界面

1.  登录

![](media/0b26158772eb725cc4157461708111d3.png)

图9 登录界面

1.  新建文件

>   **（除了管理员，其他用户只有在自己的目录里才能对文件进行操作）**

![](media/7904864c94365fdcaaee1080467559ab.png)

图10 新建文件操作

![](media/fa2b7a14bc9c1459ebe728886d1c6a6e.png)

图11 新建文件操作结果

1.  新建文件夹

![](media/849e1f1d659312b43227a71412f85797.png)

图12 新建文件夹操作

![](media/1fd997910fbe86979bc78c8b048c3b60.png)

图13 新建文件夹操作结果

1.  删除文件

![](media/a225a020ce04e4a7f14f2b6e6008db4d.png)

图14 删除文件操作

![](media/0887e02485e3a72852e013a9aa476f72.png)

图15 删除文件操作结果

1.  删除文件夹

![](media/7fef3246e29a9df9749343f086b52e7f.png)

图16 删除文件夹操作-1

![](media/455a2d2f551a661ffb827b643f8bd7be.png)

图17 删除文件夹操作-2

![](media/1f247959568859bbe37bb9fe9c97df6e.png)

图18 删除文件夹结果

1.  批量删除文件和文件夹

![](media/dcaeb5f72b167bf4383ac33d3cfa6baf.png)

图19 批量删除操作-1

![](media/d62bcbd2053d7a029b840582a9c134f0.png)

图20 批量删除操作-2

（删除到文件夹时会提示）

![](media/44f18565634a7916b8a5b9104501cc9e.png)

图21 批量删除结果

1.  面包屑导航

![](media/1fe9e0b20ecc3a5bf8dcf4a8a7e907d7.png)

图22 面包屑导航界面

（点击其中的任意一级进入上级目录）

![](media/5d21caf0d3fbe4236c2a9ccc0b58cb6f.png)

图23 面包屑导航操作-1

（点击返回上一级可以返回上一层文件夹）

![](media/bb9b070875b75e7f86457ec8a06b6192.png)

图24 面包屑导航-2

1.  文件编辑

![](media/17ca33bb58862a4172a007ea84719689.png)

>   图25 文件编辑

1.  权限管理

>   **规则：**除管理员外，只能在自己拥有的目录中进行删除和新建文件夹，只能删除自己的文件和文件夹

![](media/94749bb3adb25c5fed5395264408e29a.png)

图26 权限管理提示

1.  文件锁定\\解锁

**规则：**文件默认是不锁定状态（欢迎文件默认锁定），所有人可读可写，文件夹默认不锁定，所有人可读，当加锁后，除了管理员，**其他人对加锁文件夹不能访问，加锁文件不能保存**，如果需要保护文件，可将文件放入文件夹加锁

![](media/17ca33bb58862a4172a007ea84719689.png)

图27 文件未被锁定

（文件未加锁，任意修改）

![](media/cb301d075f317228c23539dc9361e455.png)

图28 文件被锁定

（加锁文件不能保存）

![](media/e588f5c63ad0a04ebf3e23b796309647.png)

图29 文件夹被锁定

（加锁文件夹不能进入）

1.  查看个人磁盘使用情况

![](media/3d44a181eb801eac34aeb72cb63f27fc.png)

图30 个人磁盘使用情况

1.  查看总磁盘使用情况

![](media/939609163e409e81ff8c46362cb503da.png)

图31 查看总磁盘情况

1.  退出

![](media/2dc331dc5475a35d9207950277a64356.png)

图32 退出操作

![](media/f94a89808e347de49cb509e6be51f8f5.png)

图33 退出操作结果

1.  安装和使用说明

    1.  **安装说明**：

        1.  先按照本报告配置搭建好环境

        2.  将所有文件放入APACHE的htdocs文件夹中

        3.  建立MYSQL本地数据库，账号ROOT，密码ROOT，建立数据库file_system,导入目录下的sql文件

        4.  打开index.html,开始使用
